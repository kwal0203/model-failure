---
import FormattedDate from "@/components/FormattedDate.astro";
import { getPaperReviews, sortByDateDesc } from "@/data/modelfailure";
import PageLayout from "@/layouts/Base.astro";

const reviews = sortByDateDesc(await getPaperReviews());
---

<PageLayout
	meta={{
		description: "Structured reviews of external papers, with security takeaways and repro notes.",
		title: "Research Reviews",
	}}
>
	<h1 class="title mb-8">Paper Reviews</h1>
	<ul class="space-y-6" role="list">
		{reviews.map((entry) => (
			<li class="rounded border border-gray-300 p-4 dark:border-gray-700">
				<div class="mb-2 flex items-center justify-between gap-2">
					<a class="cactus-link font-semibold" href={`/research/reviews/${entry.id}/`}>
						{entry.data.title}
					</a>
					<FormattedDate class="text-sm text-gray-600 dark:text-gray-400" date={entry.data.date} />
				</div>
				<p class="mb-1 text-sm">{entry.data.paper_authors.join(", ")}</p>
				<p class="text-sm">
					{entry.data.venue} ({entry.data.year}) | Reproduced: {entry.data.reproduced ? "Yes" : "No"}
				</p>
			</li>
		))}
	</ul>
</PageLayout>
